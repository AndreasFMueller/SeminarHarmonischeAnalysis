%
% l1konvergenz.tex -- template for standalon tikz images
%
% (c) 2021 Prof Dr Andreas MÃ¼ller, OST Ostschweizer Fachhochschule
%
\documentclass[tikz]{standalone}
\usepackage{amsmath}
\usepackage{times}
\usepackage{txfonts}
\usepackage{pgfplots}
\usepackage{csvsimple}
\usetikzlibrary{arrows,intersections,math}
\definecolor{darkgreen}{rgb}{0,0.8,0}
\begin{document}
\def\skala{1}
\def\s{12/(2*3.14159)}
\begin{tikzpicture}[>=latex,thick,scale=\skala,
declare function={
	f(\x) = (4/3.14159)*(sin(\x)+sin(3*\x)/3+sin(5*\x)/5+sin(7*\x)/7+sin(9*\x)/9+sin(11*\x)/11+sin(13*\x)/13+sin(15*\x)/15+sin(17*\x)/17+sin(19*\x)/19);
	},
]

\def\eps{0.13}
\def\del{0.45}

\fill[color=orange!20] (0,{(1-\eps)*\s}) rectangle ({3.1415*\s},{(1+\eps)*\s});
\fill[color=orange!20]
	({3.1415*\s},{(-1+\eps)*\s}) rectangle ({2*3.1415*\s},{(-1-\eps)*\s});

\fill[color=darkgreen!20] (-0.1,{-2*\s}) rectangle (\del,{2*\s});
\fill[color=darkgreen!20]
	({3.1415*\s-\del},{-2*\s}) rectangle ({3.1415*\s+\del},{2*\s});
\fill[color=darkgreen!20]
	({2*3.1415*\s-\del},{-2*\s}) rectangle ({2*3.1415*\s},{2*\s});

\node[color=darkgreen] at (\del,0)
	[above right] {$0\pi+\delta\mathstrut$};
\node[color=darkgreen] at ({3.1415*\s-\del},0)
	[above left] {$\pi-\delta\mathstrut$};
\node[color=darkgreen] at ({3.1415*\s+\del},0)
	[above right] {$\pi+\delta\mathstrut$};
\node[color=darkgreen] at ({2*3.1415*\s-\del},0)
	[above left] {$2\pi+\delta\mathstrut$};

\draw[color=darkgreen,line width=0.3pt]
	({3.1415*\s},{1*\s})
	--
	({3.1415*\s+2*\del},{1*\s});
\draw[color=darkgreen,line width=0.3pt]
	({3.1415*\s+\del},{2*\s})
	--
	({3.1415*\s+2*\del},{2*\s});
\draw[<->,color=darkgreen] 
	({3.1415*\s+1.6*\del},{1*\s})
	--
	({3.1415*\s+1.6*\del},{2*\s});
\node at 
	({3.1415*\s+1.6*\del},{1.5*\s}) [right] {$M$};

\draw[->] (-0.1,0) -- (13.5,0) coordinate[label={$x$}];
\draw[->] (0,{-2.05*\s}) -- (0,{2.1*\s}) coordinate[label={right:$y$}];

\draw[color=orange,line width=0.3pt]
	({0.5*3.1415*\s},{(1-\eps)*\s)})
	--
	({0.5*3.1415*\s},{(1+\eps)*\s)});
\draw[->,color=orange] 
	({0.5*3.1415*\s},{(1-3*\eps)*\s)})
	--
	({0.5*3.1415*\s},{(1-\eps)*\s)});
\draw[->,color=orange] 
	({0.5*3.1415*\s},{(1+3*\eps)*\s)})
	--
	({0.5*3.1415*\s},{(1+\eps)*\s)});
\node[color=orange] at ({0.5*3.1415*\s},{(1+2*\eps)*\s)})
	[right] {$2\varepsilon$};

\draw[color=red,line width=1.4pt] (0.1,{-\s}) -- (0,{-\s}) -- (0,{\s})
	-- ({3.1415*\s},{\s})
	-- ({3.1415*\s},{-\s})
	-- ({2*3.1415*\s},{-\s})
	-- ({2*3.1415*\s},{\s})
	-- (13.2,{\s});

\draw[color=blue,line width=1.4pt] plot[domain=0:360,samples=300] ({2*3.1415*\x/360)*\s},{\s*f(\x)});

\node at ({3.1415*\s},0) [below left] {$\pi\mathstrut $};
\node at ({2*3.1415*\s},0) [below right] {$2\pi\mathstrut$};
\node at (0,0) [below left] {$0\mathstrut$};

\end{tikzpicture}
\end{document}

